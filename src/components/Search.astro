---
import { searchConfig } from '@/config';
import { t } from '@utils/i18n';
import Pagefind from './search/Pagefind.tsx';
---

<dialog id="search_modal" class="modal">
  <div class="modal-box">
    <form method="dialog">
      <button
        class="btn btn-circle btn-ghost btn-sm absolute top-2 right-2"
        title={t.common.close()}
        aria-label={t.common.close()}>âœ•</button
      >
    </form>
    <div class="w-full p-4">
      {
        (() => {
          switch (searchConfig.provider) {
            case 'pagefind':
              return <Pagefind client:visible inputId="search-input" />;
          }
        })()
      }
    </div>
    <div class="relative mt-auto w-full shrink-0 pt-4 text-center">
      Powered by {
        (() => {
          switch (searchConfig.provider) {
            case 'pagefind':
              return (
                <a href="https://pagefind.app" target="_blank" class="text-primary">
                  Pagefind
                </a>
              );
          }
        })()
      }
    </div>
  </div>
  <form method="dialog" class="modal-backdrop">
    <button>{t.common.close()}</button>
  </form>
</dialog>
